{% extends '../index.html' %}

{% load static %}

{% block content %}
       <div class="content">
                    <!-- lal -->
                    <div class="block block-rounded">
                        <div class="block-header">
                            <h3 class="block-title">Affectation Matieres</h3>
                        </div>
                        <form method="post">
                            {% csrf_token %}
                            <div class="block-content">
                                <p class="font-size-sm text-muted mb-3">Choisissez un enseignant dans la liste déroulante :</p>
                                <div class="form-group row mb-4">
                                    <label class="col-sm-2 col-form-label" for="enseignant">enseignant :</label>
                                    <div class="col-sm-10">
                                        <select class="form-control" name="enseignant" id="enseignant">
                                            {% for enseignant in enseignants %}
                                                <option name="enseignant" value="{{ enseignant.id }}">{{ enseignant.nom }} {{ enseignant.prenom }}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <p class="font-size-sm text-muted mb-3">Cochez les matières à affecter avec leurs ponderation respective :</p>
                                <div class="form-group row mb-4">
                                    {% for matiere in matieres %}
                                        <div class="col-sm-6">
                                            <div class="custom-control custom-checkbox">
                                                <input class="custom-control-input matiere" type="checkbox" name="matieres[]" value="{{ matiere.libelle }}" id="{{ matiere.libelle }}">
                                                <label class="custom-control-label" for="{{ matiere.libelle }}">{{ matiere.libelle }}</label>
                                            </div>
                                            <select class="form-control form-control-sm ponderation mt-2 d-none" name="ponderations[]" id="{{ matiere.libelle }}-ponderation">
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                            </select>
                                        </div>
                                    {% endfor %}
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-12 text-center">
                                        <button type="submit" class="btn btn-primary">Enregistrer</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        
                       
                        
                        
                        
                    </div>
                    <!-- END Normal -->

                    
                    
        </div>

		<script>
            // Affiche la pondération correspondante à la matière sélectionnée
            $('.matiere').change(function() {
                var matiere = $(this).attr('id');
                var ponderation = $('#' + matiere + '-ponderation');
                if ($(this).is(':checked')) {
                    ponderation.removeClass('d-none');
                } else {
                    ponderation.addClass('d-none');
                }
            });
        </script>

{% endblock %}